{% extends "domain/base.html" %}
{% load static %}

{% block head %}
    <link href="{% static 'domain/typeaheadjs.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}

    <title> DIGGER | Isoform-Level Analysis </title>

    <div class="container">
        <div class="card border-0 shadow my-5">
            <div class="card-body p-5">
                <h1 class="font-weight-light">Isoform-Level Analysis</h1>


                <br/><br/> <br/>
                <h4 class="font-weight-light"><span style="font-weight:bold">Submit a Protein Variant </span></h4>

                <h5 class> Input a protein to visualize protein and domain Interactions simultaneously. This mode is
                    useful
                    to
                    visualize interacted region and to compare the structure and interactions of different
                    isoforms. </h5>
                <br/>

                <div role="tabpanel" class="tab-pane" id="Section3">

                    <form class="card card-sm">
                        <div class="card-body row no-gutters align-items-center">
                            <div class="col">
                                <div id="remote">
                                    <input
                                            class="form-control mr-sm-2 typeahead"
                                            type="text"
                                            placeholder="Input an Ensembl ID ( Gene / Transcript / Protein )"
                                            aria-label="Search"
                                            name='search'
                                            value="">
                                </div>
                            </div>
                            <!--end of col-->
                            <div class="col-auto">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Submit</button>
                            </div>
                            <!--end of col-->

                        </div>
                        <h6 class><span style="font-weight:bold"> Examples: ENSG00000058404 ; ENST00000066544 ; ENST00000623693 ;  ENSP00000358396 ; ENSP00000489057 ; ENST00000016946  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;  ENST00000346342 ; ENST00000409330 ; ENST00000557508</span>
                        </h6>
                    </form>


                    <br/><br/> <br/><br/>
                    <h4 class="font-weight-light"><span style="font-weight:bold"> How does this mode work? </span></h4>


                    <center>
                        <img src="{% static 'image/isoform mode.svg' %}"/>
                    </center>


                </div>
            </div>
        </div>
    </div>
{% endblock content %}

{% block script %}

    <script src="{% static "domain/typeahead.bundle.js" %}"></script>

    <!-- Derived from here https://stackoverflow.com/questions/45588138/typeahead-js-in-django-project -->
    <script>
        var gene_symbol = new Bloodhound({
            datumTokenizer: Bloodhound.tokenizers.obj.whitespace('gene_symbol'),
            queryTokenizer: Bloodhound.tokenizers.whitespace,
            prefetch: '{% url "gene_symbol-autocomplete" %}?q=%QUERY',
            remote: {
                url: '{% url "gene_symbol-autocomplete" %}?q=%QUERY',
                wildcard: '%QUERY'
            }
        });

        $('#remote .typeahead').typeahead(null, {
            name: 'gene-symbol',
            display: 'gene_symbol',
            source: gene_symbol
        });
    </script>

{% endblock %}